{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "input-otp",
  "type": "registry:ui",
  "title": "Input-otp",
  "description": "A input-otp component for React Native applications.",
  "dependencies": [],
  "registryDependencies": [],
  "files": [
    {
      "path": "registry/input-otp/input-otp.tsx",
      "content": "import * as React from \"react\"\r\nimport { View, Text, Pressable, TextInput, Platform } from \"react-native\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\ninterface OTPContextType {\r\n  value: string\r\n  setValue: React.Dispatch<React.SetStateAction<string>>\r\n  maxLength: number\r\n  onFocus: (index: number) => void\r\n  focusedIndex: number | null\r\n  otpCodeRef: React.MutableRefObject<string[]>\r\n  inputRef: React.RefObject<TextInput>\r\n}\r\n\r\nconst OTPContext = React.createContext<OTPContextType | undefined>(undefined)\r\n\r\nexport interface InputOTPProps {\r\n  value: string\r\n  onChange: (value: string) => void\r\n  maxLength: number\r\n  containerClassName?: string\r\n  className?: string\r\n  children: React.ReactNode\r\n}\r\n\r\nexport const InputOTP = React.forwardRef<View, InputOTPProps>(\r\n  ({ maxLength, value, onChange, containerClassName, className, children }, ref) => {\r\n    const [focusedIndex, setFocusedIndex] = React.useState<number | null>(null)\r\n    const otpCodeRef = React.useRef<string[]>(value.split(\"\"))\r\n    const inputRef = React.useRef<TextInput>(null)\r\n\r\n    React.useEffect(() => {\r\n      otpCodeRef.current = value.split(\"\")\r\n    }, [value])\r\n\r\n    const setValue = React.useCallback((newValue: React.SetStateAction<string>) => {\r\n      const updatedValue = typeof newValue === \"function\" ? newValue(value) : newValue\r\n      onChange(updatedValue.slice(0, maxLength))\r\n    }, [value, onChange, maxLength])\r\n\r\n    const onFocus = React.useCallback((index: number) => {\r\n      setFocusedIndex(index)\r\n      // Focus the hidden input to trigger keyboard\r\n      if (inputRef.current) {\r\n        inputRef.current.focus()\r\n      }\r\n    }, [])\r\n\r\n    const handleKeyPress = (text: string) => {\r\n      if (!text) return\r\n\r\n      if (focusedIndex !== null && focusedIndex < maxLength) {\r\n        const newValue = [...otpCodeRef.current]\r\n\r\n        if (text.length === 1) {\r\n          newValue[focusedIndex] = text\r\n          setValue(newValue.join(\"\"))\r\n\r\n          if (focusedIndex < maxLength - 1) {\r\n            setFocusedIndex(focusedIndex + 1)\r\n          }\r\n        }\r\n        // If pasting multiple characters, fill in slots starting from focused index\r\n        else {\r\n          const chars = text.split(\"\")\r\n          for (let i = 0; i < chars.length && focusedIndex + i < maxLength; i++) {\r\n            newValue[focusedIndex + i] = chars[i]\r\n          }\r\n          setValue(newValue.join(\"\"))\r\n\r\n          // Move focus to last filled position or end\r\n          const newFocusIndex = Math.min(focusedIndex + chars.length, maxLength - 1)\r\n          setFocusedIndex(newFocusIndex)\r\n        }\r\n      }\r\n    }\r\n\r\n    const handleBackspace = () => {\r\n      if (focusedIndex !== null) {\r\n        const newValue = [...otpCodeRef.current]\r\n\r\n        // If current slot is empty, move focus back and clear that slot\r\n        if (!newValue[focusedIndex] && focusedIndex > 0) {\r\n          setFocusedIndex(focusedIndex - 1)\r\n          newValue[focusedIndex - 1] = \"\"\r\n        } else {\r\n          // Otherwise clear current slot\r\n          newValue[focusedIndex] = \"\"\r\n        }\r\n\r\n        setValue(newValue.join(\"\"))\r\n      }\r\n    }\r\n\r\n    return (\r\n      <OTPContext.Provider\r\n        value={{\r\n          value,\r\n          setValue,\r\n          maxLength,\r\n          onFocus,\r\n          focusedIndex,\r\n          otpCodeRef,\r\n          inputRef\r\n        }}\r\n      >\r\n        <View\r\n          ref={ref}\r\n          className={cn(\r\n            \"flex flex-row items-center justify-center relative\",\r\n            containerClassName\r\n          )}\r\n        >\r\n          {children}\r\n          <TextInput\r\n            ref={inputRef}\r\n            className=\"absolute opacity-0 h-px w-px\"\r\n            keyboardType=\"number-pad\"\r\n            textContentType=\"oneTimeCode\"\r\n            value=\"\"\r\n            onChangeText={handleKeyPress}\r\n            onKeyPress={({ nativeEvent }) => {\r\n              if (nativeEvent.key === 'Backspace') {\r\n                handleBackspace()\r\n              }\r\n            }}\r\n            maxLength={maxLength}\r\n            caretHidden\r\n            selectTextOnFocus={false}\r\n            contextMenuHidden={true}\r\n          />\r\n        </View>\r\n      </OTPContext.Provider>\r\n    )\r\n  }\r\n)\r\n\r\nInputOTP.displayName = \"InputOTP\"\r\n\r\nexport interface InputOTPGroupProps {\r\n  className?: string\r\n  children: React.ReactNode\r\n}\r\n\r\nexport const InputOTPGroup = React.forwardRef<View, InputOTPGroupProps>(\r\n  ({ className, children }, ref) => (\r\n    <View\r\n      ref={ref}\r\n      className={cn(\"flex flex-row items-center\", className)}\r\n    >\r\n      {children}\r\n    </View>\r\n  )\r\n)\r\n\r\nInputOTPGroup.displayName = \"InputOTPGroup\"\r\n\r\nexport interface InputOTPSlotProps {\r\n  index: number\r\n  className?: string\r\n}\r\n\r\nexport const InputOTPSlot = React.forwardRef<View, InputOTPSlotProps>(\r\n  ({ index, className }, ref) => {\r\n    const context = React.useContext(OTPContext)\r\n\r\n    if (!context) {\r\n      throw new Error(\"InputOTPSlot must be used within an InputOTP\")\r\n    }\r\n\r\n    const { value, onFocus, focusedIndex, inputRef } = context\r\n\r\n    const char = value[index] || \"\"\r\n    const isActive = focusedIndex === index\r\n\r\n    const handlePress = () => {\r\n      onFocus(index)\r\n    }\r\n\r\n    return (\r\n      <Pressable onPress={handlePress}>\r\n        <View\r\n          ref={ref}\r\n          className={cn(\r\n            \"relative flex h-14 w-14 items-center justify-center border border-input rounded-md bg-background text-lg\",\r\n            \"shadow-sm mx-1\",\r\n            isActive ? \"border-primary z-10\" : \"\",\r\n            Platform.OS === \"ios\" ? \"ios:shadow-sm ios:shadow-foreground/10\" : \"android:elevation-1\",\r\n            className\r\n          )}\r\n        >\r\n          <Text className=\"text-center text-foreground text-xl font-medium\">\r\n            {char}\r\n          </Text>\r\n          {isActive && !char && (\r\n            <View className=\"absolute h-6 w-0.5 bg-foreground animate-pulse\" />\r\n          )}\r\n        </View>\r\n      </Pressable>\r\n    )\r\n  }\r\n)\r\n\r\nInputOTPSlot.displayName = \"InputOTPSlot\"\r\n\r\nexport interface InputOTPSeparatorProps {\r\n  className?: string\r\n}\r\n\r\nexport const InputOTPSeparator = React.forwardRef<View, InputOTPSeparatorProps>(\r\n  ({ className }, ref) => (\r\n    <View ref={ref} className={cn(\"px-2\", className)}>\r\n      <View className=\"h-0.5 w-4 bg-muted-foreground\" />\r\n    </View>\r\n  )\r\n)\r\n\r\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\r\n\r\nexport function useOTPInput(maxLength: number) {\r\n  const [otp, setOtp] = React.useState(\"\")\r\n\r\n  const handleChange = React.useCallback((value: string) => {\r\n    // Only accept numbers\r\n    const cleaned = value.replace(/[^0-9]/g, \"\")\r\n    // Limit to maxLength\r\n    const limited = cleaned.slice(0, maxLength)\r\n    setOtp(limited)\r\n  }, [maxLength])\r\n\r\n  return {\r\n    value: otp,\r\n    setValue: handleChange,\r\n    isComplete: otp.length === maxLength,\r\n    isValid: otp.length === maxLength,\r\n    clear: () => setOtp(\"\")\r\n  }\r\n}\r\n",
      "type": "registry:ui"
    }
  ],
  "changelog": [],
  "customUsage": "import { InputOTP, InputOTPGroup, InputOTPSlot, useOTPInput } from \"@/components/ui/input-otp\";\r\nimport * as React from \"react\";\r\n\r\nexport default function InputOTPExample() {\r\n    const basicOtp = useOTPInput(4);\r\n\r\n    return (\r\n        <InputOTP\r\n            value={basicOtp.value}\r\n            onChange={basicOtp.setValue}\r\n            maxLength={4}\r\n            containerClassName=\"justify-center\"\r\n        >\r\n            <InputOTPGroup>\r\n                <InputOTPSlot index={0} />\r\n                <InputOTPSlot index={1} />\r\n                <InputOTPSlot index={2} />\r\n                <InputOTPSlot index={3} />\r\n            </InputOTPGroup>\r\n        </InputOTP>\r\n    );\r\n}\r\n",
  "customPreview": "import { Button } from \"@/components/ui/button\";\r\nimport { InputOTP, InputOTPGroup, InputOTPSeparator, InputOTPSlot, useOTPInput } from \"@/components/ui/input-otp\";\r\nimport { Ionicons } from \"@expo/vector-icons\";\r\nimport * as React from \"react\";\r\nimport { Alert, KeyboardAvoidingView, Platform, ScrollView, Text, TouchableOpacity, View } from \"react-native\";\r\nimport { SafeAreaView } from \"react-native-safe-area-context\";\r\n\r\nexport default function InputOTPExample() {\r\n    // Basic OTP\r\n    const basicOtp = useOTPInput(4);\r\n\r\n    // Verification OTP\r\n    const verificationOtp = useOTPInput(6);\r\n\r\n    // PIN code OTP\r\n    const pinOtp = useOTPInput(4);\r\n\r\n    // Phone verification OTP\r\n    const phoneOtp = useOTPInput(4);\r\n\r\n    // Handle verify button press\r\n    const handleVerify = () => {\r\n        if (verificationOtp.isComplete) {\r\n            Alert.alert(\"Success\", `Code verified: ${verificationOtp.value}`);\r\n        } else {\r\n            Alert.alert(\"Error\", \"Please enter the complete code\");\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <SafeAreaView className=\"flex-1 bg-background\" edges={[\"bottom\"]}>\r\n                <KeyboardAvoidingView\r\n                    behavior={Platform.OS === \"ios\" ? \"padding\" : \"height\"}\r\n                    style={{ flex: 1 }}\r\n                    keyboardVerticalOffset={100}\r\n                >\r\n                    <ScrollView\r\n                        className=\"p-4\"\r\n                        keyboardShouldPersistTaps=\"handled\"\r\n                        keyboardDismissMode=\"on-drag\"\r\n                    >\r\n                        <View className=\"mb-6\">\r\n                            <Text className=\"text-2xl font-bold mb-2 text-foreground\">\r\n                                OTP Input\r\n                            </Text>\r\n                            <Text className=\"text-base mb-6 text-muted-foreground\">\r\n                                Input component for one-time passwords and verification codes.\r\n                            </Text>\r\n                            <Text className=\"text-sm mb-2 text-muted-foreground\">\r\n                                Tap on any slot to focus and bring up the numeric keyboard.\r\n                            </Text>\r\n                        </View>\r\n\r\n                        <View className=\"mb-8\">\r\n                            <Text className=\"text-xl font-semibold mb-4 text-foreground\">\r\n                                Basic OTP Input\r\n                            </Text>\r\n                            <InputOTP\r\n                                value={basicOtp.value}\r\n                                onChange={basicOtp.setValue}\r\n                                maxLength={4}\r\n                                containerClassName=\"justify-center\"\r\n                            >\r\n                                <InputOTPGroup>\r\n                                    <InputOTPSlot index={0} />\r\n                                    <InputOTPSlot index={1} />\r\n                                    <InputOTPSlot index={2} />\r\n                                    <InputOTPSlot index={3} />\r\n                                </InputOTPGroup>\r\n                            </InputOTP>\r\n                            <View className=\"flex-row justify-between items-center mt-2\">\r\n                                <Text className=\"text-sm text-muted-foreground\">\r\n                                    {basicOtp.isComplete ? \"Complete!\" : \"Tap to enter code\"}\r\n                                </Text>\r\n                                {basicOtp.value.length > 0 && (\r\n                                    <TouchableOpacity onPress={basicOtp.clear}>\r\n                                        <Text className=\"text-sm text-primary\">Clear</Text>\r\n                                    </TouchableOpacity>\r\n                                )}\r\n                            </View>\r\n                        </View>\r\n\r\n                        <View className=\"mb-8\">\r\n                            <Text className=\"text-xl font-semibold mb-4 text-foreground\">\r\n                                Verification Code\r\n                            </Text>\r\n                            <View className=\"mb-4\">\r\n                                <Text className=\"text-sm font-medium mb-2 text-foreground text-center\">\r\n                                    Enter the 6-digit code sent to your phone\r\n                                </Text>\r\n                                <InputOTP\r\n                                    value={verificationOtp.value}\r\n                                    onChange={verificationOtp.setValue}\r\n                                    maxLength={6}\r\n                                    containerClassName=\"justify-center\"\r\n                                >\r\n                                    <InputOTPGroup>\r\n                                        <InputOTPSlot index={0} />\r\n                                        <InputOTPSlot index={1} />\r\n                                        <InputOTPSlot index={2} />\r\n                                    </InputOTPGroup>\r\n                                    <InputOTPSeparator />\r\n                                    <InputOTPGroup>\r\n                                        <InputOTPSlot index={3} />\r\n                                        <InputOTPSlot index={4} />\r\n                                        <InputOTPSlot index={5} />\r\n                                    </InputOTPGroup>\r\n                                </InputOTP>\r\n                            </View>\r\n                            <View className=\"flex-row justify-center items-center\">\r\n                                <Button\r\n                                    onPress={handleVerify}\r\n                                    className={!verificationOtp.isComplete ? \"opacity-50 mr-2\" : \"mr-2\"}\r\n                                    disabled={!verificationOtp.isComplete}\r\n                                >\r\n                                    <Text className=\"font-bold text-primary-foreground\">\r\n                                        Verify Code\r\n                                    </Text>\r\n                                </Button>\r\n                                {verificationOtp.value.length > 0 && (\r\n                                    <Button\r\n                                        variant=\"outline\"\r\n                                        onPress={verificationOtp.clear}\r\n                                    >\r\n                                        <Text className=\"font-medium text-foreground\">Clear</Text>\r\n                                    </Button>\r\n                                )}\r\n                            </View>\r\n                        </View>\r\n\r\n                        <View className=\"mb-8\">\r\n                            <Text className=\"text-xl font-semibold mb-4 text-foreground\">\r\n                                PIN Code\r\n                            </Text>\r\n                            <View>\r\n                                <Text className=\"text-sm font-medium mb-2 text-foreground text-center\">\r\n                                    Enter your PIN\r\n                                </Text>\r\n                                <InputOTP\r\n                                    value={pinOtp.value}\r\n                                    onChange={pinOtp.setValue}\r\n                                    maxLength={4}\r\n                                    containerClassName=\"justify-center\"\r\n                                >\r\n                                    <InputOTPGroup>\r\n                                        {[0, 1, 2, 3].map((index) => (\r\n                                            <InputOTPSlot\r\n                                                key={index}\r\n                                                index={index}\r\n                                                className=\"rounded-full h-16 w-16 mx-1\"\r\n                                            />\r\n                                        ))}\r\n                                    </InputOTPGroup>\r\n                                </InputOTP>\r\n                                <View className=\"flex-row justify-center items-center mt-4\">\r\n                                    <Text className=\"text-sm text-muted-foreground mr-2\">\r\n                                        {pinOtp.isComplete ? \"PIN complete\" : \"Tap to enter PIN\"}\r\n                                    </Text>\r\n                                    {pinOtp.value.length > 0 && (\r\n                                        <TouchableOpacity onPress={pinOtp.clear}>\r\n                                            <Text className=\"text-sm text-primary\">Reset</Text>\r\n                                        </TouchableOpacity>\r\n                                    )}\r\n                                </View>\r\n                            </View>\r\n                        </View>\r\n\r\n                        <View className=\"mb-8\">\r\n                            <Text className=\"text-xl font-semibold mb-4 text-foreground\">\r\n                                Phone Verification with Icon\r\n                            </Text>\r\n                            <View>\r\n                                <View className=\"flex-row items-center justify-center mb-4\">\r\n                                    <Ionicons name=\"phone-portrait-outline\" size={24} color=\"gray\" className=\"mr-2\" />\r\n                                    <Text className=\"text-sm font-medium text-foreground\">\r\n                                        Enter the code sent to +1 (555) 123-4567\r\n                                    </Text>\r\n                                </View>\r\n                                <InputOTP\r\n                                    value={phoneOtp.value}\r\n                                    onChange={phoneOtp.setValue}\r\n                                    maxLength={4}\r\n                                    containerClassName=\"justify-center\"\r\n                                >\r\n                                    <InputOTPGroup>\r\n                                        {[0, 1, 2, 3].map((index) => (\r\n                                            <InputOTPSlot\r\n                                                key={index}\r\n                                                index={index}\r\n                                                className=\"h-14 w-14 mx-2 rounded-lg\"\r\n                                            />\r\n                                        ))}\r\n                                    </InputOTPGroup>\r\n                                </InputOTP>\r\n                                <View className=\"items-center mt-4\">\r\n                                    <Button\r\n                                        className={phoneOtp.isComplete ? \"bg-primary\" : \"bg-primary/50\"}\r\n                                        disabled={!phoneOtp.isComplete}\r\n                                    >\r\n                                        <Text className=\"font-bold text-primary-foreground\">\r\n                                            Submit\r\n                                        </Text>\r\n                                    </Button>\r\n                                    <TouchableOpacity className=\"mt-2\">\r\n                                        <Text className=\"text-sm text-primary\">Resend Code</Text>\r\n                                    </TouchableOpacity>\r\n                                </View>\r\n                            </View>\r\n                        </View>\r\n                    </ScrollView>\r\n                </KeyboardAvoidingView>\r\n            </SafeAreaView>\r\n        </>\r\n    );\r\n}\r\n"
}