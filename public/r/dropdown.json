{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "dropdown",
  "type": "registry:ui",
  "title": "Dropdown",
  "description": "A dropdown component for React Native applications.",
  "dependencies": [],
  "registryDependencies": [],
  "files": [
    {
      "path": "registry/dropdown/dropdown.tsx",
      "content": "import * as React from \"react\";\r\nimport {\r\n  View,\r\n  Text,\r\n  Pressable,\r\n  Modal,\r\n  TouchableWithoutFeedback,\r\n  Platform,\r\n  Animated,\r\n  ScrollView,\r\n  Dimensions,\r\n  LayoutChangeEvent,\r\n  LayoutRectangle,\r\n} from \"react-native\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { Ionicons } from \"@expo/vector-icons\";\r\n\r\ninterface DropdownProps {\r\n  children: React.ReactNode;\r\n  className?: string;\r\n  open?: boolean;\r\n  onOpenChange?: (open: boolean) => void;\r\n}\r\n\r\ninterface DropdownTriggerProps {\r\n  children: React.ReactNode;\r\n  className?: string;\r\n  disabled?: boolean;\r\n  asChild?: boolean;\r\n}\r\n\r\ninterface DropdownContentProps {\r\n  children: React.ReactNode;\r\n  className?: string;\r\n  align?: \"start\" | \"center\" | \"end\";\r\n  sideOffset?: number;\r\n}\r\n\r\ninterface DropdownItemProps {\r\n  children: React.ReactNode;\r\n  className?: string;\r\n  disabled?: boolean;\r\n  destructive?: boolean;\r\n  onSelect?: () => void;\r\n  icon?: React.ComponentProps<typeof Ionicons>[\"name\"];\r\n  shortcut?: string;\r\n}\r\n\r\ninterface DropdownLabelProps {\r\n  children: React.ReactNode;\r\n  className?: string;\r\n}\r\n\r\ninterface DropdownSeparatorProps {\r\n  className?: string;\r\n}\r\n\r\ninterface DropdownGroupProps {\r\n  children: React.ReactNode;\r\n  className?: string;\r\n}\r\n\r\nconst DropdownContext = React.createContext<{\r\n  open: boolean;\r\n  setOpen: (open: boolean) => void;\r\n  triggerRect: LayoutRectangle | null;\r\n  setTriggerRect: (rect: LayoutRectangle) => void;\r\n}>({\r\n  open: false,\r\n  setOpen: () => { },\r\n  triggerRect: null,\r\n  setTriggerRect: () => { },\r\n});\r\n\r\nconst Dropdown = React.forwardRef<View, DropdownProps>(\r\n  ({ children, className, open = false, onOpenChange, ...props }, ref) => {\r\n    const [internalOpen, setInternalOpen] = React.useState(false);\r\n    const [triggerRect, setTriggerRect] =\r\n      React.useState<LayoutRectangle | null>(null);\r\n\r\n    const isControlled = open !== undefined;\r\n    const isOpen = isControlled ? open : internalOpen;\r\n\r\n    const setOpen = React.useCallback(\r\n      (value: boolean) => {\r\n        if (!isControlled) {\r\n          setInternalOpen(value);\r\n        }\r\n        onOpenChange?.(value);\r\n      },\r\n      [isControlled, onOpenChange]\r\n    );\r\n\r\n    return (\r\n      <DropdownContext.Provider\r\n        value={{ open: isOpen, setOpen, triggerRect, setTriggerRect }}\r\n      >\r\n        <View ref={ref} className={cn(\"\", className)} {...props}>\r\n          {children}\r\n        </View>\r\n      </DropdownContext.Provider>\r\n    );\r\n  }\r\n);\r\n\r\nDropdown.displayName = \"Dropdown\";\r\n\r\nconst DropdownTrigger = React.forwardRef<View, DropdownTriggerProps>(\r\n  (\r\n    { children, className, disabled = false, asChild = false, ...props },\r\n    ref\r\n  ) => {\r\n    const { setOpen, setTriggerRect } = React.useContext(DropdownContext);\r\n    const triggerRef = React.useRef<View>(null);\r\n\r\n    const measureTrigger = () => {\r\n      triggerRef.current?.measure((x, y, width, height, pageX, pageY) => {\r\n        setTriggerRect({\r\n          x: pageX,\r\n          y: pageY,\r\n          width,\r\n          height,\r\n        });\r\n      });\r\n    };\r\n\r\n    const handlePress = (e: any) => {\r\n      measureTrigger();\r\n      setOpen(true);\r\n    };\r\n\r\n    if (asChild) {\r\n      const child = React.Children.only(children) as React.ReactElement<{\r\n        onPress?: (e: any) => void;\r\n        ref?: React.Ref<any>;\r\n        disabled?: boolean;\r\n      }>;\r\n      return React.cloneElement(child, {\r\n        ...props,\r\n        ref: triggerRef,\r\n        onPress: (e: any) => {\r\n          child.props?.onPress?.(e);\r\n          handlePress(e);\r\n        },\r\n        disabled,\r\n      });\r\n    }\r\n\r\n    return (\r\n      <Pressable\r\n        ref={triggerRef}\r\n        className={cn(\"\", className)}\r\n        disabled={disabled}\r\n        onPress={handlePress}\r\n        {...props}\r\n      >\r\n        {children}\r\n      </Pressable>\r\n    );\r\n  }\r\n);\r\n\r\nDropdownTrigger.displayName = \"DropdownTrigger\";\r\n\r\nconst DropdownContent = React.forwardRef<View, DropdownContentProps>(\r\n  ({ children, className, align = \"start\", sideOffset = 4, ...props }, ref) => {\r\n    const { open, setOpen, triggerRect } = React.useContext(DropdownContext);\r\n    const fadeAnim = React.useRef(new Animated.Value(0)).current;\r\n    const scaleAnim = React.useRef(new Animated.Value(0.95)).current;\r\n    const [isVisible, setIsVisible] = React.useState(open);\r\n    const { width: SCREEN_WIDTH, height: SCREEN_HEIGHT } =\r\n      Dimensions.get(\"window\");\r\n    const [contentSize, setContentSize] = React.useState({\r\n      width: 0,\r\n      height: 0,\r\n    });\r\n\r\n    React.useEffect(() => {\r\n      if (open && !isVisible) {\r\n        setIsVisible(true);\r\n      }\r\n    }, [open, isVisible]);\r\n\r\n    React.useEffect(() => {\r\n      if (isVisible) {\r\n        Animated.parallel([\r\n          Animated.timing(fadeAnim, {\r\n            toValue: 1,\r\n            duration: 200,\r\n            useNativeDriver: true,\r\n          }),\r\n          Animated.spring(scaleAnim, {\r\n            toValue: 1,\r\n            damping: 20,\r\n            stiffness: 300,\r\n            useNativeDriver: true,\r\n          }),\r\n        ]).start();\r\n      }\r\n    }, [isVisible, fadeAnim, scaleAnim]);\r\n\r\n    const handleClose = React.useCallback(() => {\r\n      Animated.parallel([\r\n        Animated.timing(fadeAnim, {\r\n          toValue: 0,\r\n          duration: 150,\r\n          useNativeDriver: true,\r\n        }),\r\n        Animated.timing(scaleAnim, {\r\n          toValue: 0.95,\r\n          duration: 150,\r\n          useNativeDriver: true,\r\n        }),\r\n      ]).start(() => {\r\n        setIsVisible(false);\r\n        setOpen(false);\r\n      });\r\n    }, [fadeAnim, scaleAnim, setOpen]);\r\n\r\n    const handleLayout = (event: LayoutChangeEvent) => {\r\n      const { width, height } = event.nativeEvent.layout;\r\n      setContentSize({ width, height });\r\n    };\r\n\r\n    if (!isVisible || !triggerRect) return null;\r\n\r\n    // Calculate position\r\n    let left = triggerRect.x;\r\n    if (align === \"end\") {\r\n      left = triggerRect.x + triggerRect.width - contentSize.width;\r\n    } else if (align === \"center\") {\r\n      left = triggerRect.x + (triggerRect.width - contentSize.width) / 2;\r\n    }\r\n\r\n    // Ensure the dropdown stays within screen bounds\r\n    left = Math.max(16, Math.min(left, SCREEN_WIDTH - contentSize.width - 16));\r\n\r\n    // Position below the trigger by default\r\n    let top = triggerRect.y + triggerRect.height + sideOffset;\r\n\r\n    // If there's not enough space below, position above the trigger\r\n    if (top + contentSize.height > SCREEN_HEIGHT - 32) {\r\n      top = triggerRect.y - contentSize.height - sideOffset;\r\n    }\r\n\r\n    return (\r\n      <Modal\r\n        visible={isVisible}\r\n        transparent\r\n        statusBarTranslucent\r\n        animationType=\"none\"\r\n      >\r\n        <TouchableWithoutFeedback onPress={handleClose}>\r\n          <Animated.View\r\n            className=\"flex-1 bg-black/25\"\r\n            style={{ opacity: fadeAnim }}\r\n          >\r\n            <TouchableWithoutFeedback>\r\n              <Animated.View\r\n                ref={ref}\r\n                onLayout={handleLayout}\r\n                className={cn(\r\n                  \"absolute bg-background rounded-xl overflow-hidden\",\r\n                  Platform.OS === \"ios\"\r\n                    ? \"ios:shadow-xl\"\r\n                    : \"android:elevation-8\",\r\n                  className\r\n                )}\r\n                style={{\r\n                  transform: [{ scale: scaleAnim }],\r\n                  top,\r\n                  left,\r\n                  minWidth: Math.max(triggerRect.width, 180),\r\n                  maxWidth: SCREEN_WIDTH - 32,\r\n                  maxHeight: SCREEN_HEIGHT * 0.7,\r\n                }}\r\n                {...props}\r\n              >\r\n                <ScrollView bounces={false} className=\"py-2\">\r\n                  {children}\r\n                </ScrollView>\r\n              </Animated.View>\r\n            </TouchableWithoutFeedback>\r\n          </Animated.View>\r\n        </TouchableWithoutFeedback>\r\n      </Modal>\r\n    );\r\n  }\r\n);\r\n\r\nDropdownContent.displayName = \"DropdownContent\";\r\n\r\nconst DropdownItem = React.forwardRef<View, DropdownItemProps>(\r\n  (\r\n    {\r\n      children,\r\n      className,\r\n      disabled = false,\r\n      destructive = false,\r\n      onSelect,\r\n      icon,\r\n      shortcut,\r\n      ...props\r\n    },\r\n    ref\r\n  ) => {\r\n    const { setOpen } = React.useContext(DropdownContext);\r\n\r\n    const handlePress = () => {\r\n      onSelect?.();\r\n      setOpen(false);\r\n    };\r\n\r\n    return (\r\n      <Pressable\r\n        ref={ref}\r\n        className={cn(\r\n          \"flex-row items-center px-4 py-3 active:bg-muted/50\",\r\n          disabled && \"opacity-50\",\r\n          destructive && \"text-destructive\",\r\n          className\r\n        )}\r\n        disabled={disabled}\r\n        onPress={handlePress}\r\n        {...props}\r\n      >\r\n        {icon && (\r\n          <Ionicons\r\n            name={icon}\r\n            size={22}\r\n            className={cn(\r\n              \"text-foreground mr-3\",\r\n              destructive && \"text-destructive\"\r\n            )}\r\n          />\r\n        )}\r\n        <Text\r\n          className={cn(\r\n            \"flex-1 text-base text-foreground\",\r\n            destructive && \"text-destructive\"\r\n          )}\r\n        >\r\n          {children}\r\n        </Text>\r\n        {shortcut && (\r\n          <Text className=\"text-muted-foreground text-sm ml-3\">{shortcut}</Text>\r\n        )}\r\n      </Pressable>\r\n    );\r\n  }\r\n);\r\n\r\nDropdownItem.displayName = \"DropdownItem\";\r\n\r\nconst DropdownLabel = React.forwardRef<View, DropdownLabelProps>(\r\n  ({ children, className, ...props }, ref) => (\r\n    <View ref={ref} className={cn(\"px-4 py-2\", className)} {...props}>\r\n      <Text className=\"text-sm font-medium text-muted-foreground\">\r\n        {children}\r\n      </Text>\r\n    </View>\r\n  )\r\n);\r\n\r\nDropdownLabel.displayName = \"DropdownLabel\";\r\n\r\nconst DropdownSeparator = React.forwardRef<View, DropdownSeparatorProps>(\r\n  ({ className, ...props }, ref) => (\r\n    <View\r\n      ref={ref}\r\n      className={cn(\"h-[1px] bg-border my-2\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n);\r\n\r\nDropdownSeparator.displayName = \"DropdownSeparator\";\r\n\r\nconst DropdownGroup = React.forwardRef<View, DropdownGroupProps>(\r\n  ({ children, className, ...props }, ref) => (\r\n    <View ref={ref} className={cn(\"\", className)} {...props}>\r\n      {children}\r\n    </View>\r\n  )\r\n);\r\n\r\nDropdownGroup.displayName = \"DropdownGroup\";\r\n\r\nexport {\r\n  Dropdown,\r\n  DropdownTrigger,\r\n  DropdownContent,\r\n  DropdownItem,\r\n  DropdownLabel,\r\n  DropdownSeparator,\r\n  DropdownGroup,\r\n};\r\n",
      "type": "registry:ui"
    }
  ],
  "changelog": [],
  "customUsage": "import { Button } from \"@/components/ui/button\";\r\nimport {\r\n    Dropdown,\r\n    DropdownContent,\r\n    DropdownGroup,\r\n    DropdownItem,\r\n    DropdownLabel,\r\n    DropdownSeparator,\r\n    DropdownTrigger,\r\n} from \"@/components/ui/dropdown\";\r\nimport * as React from \"react\";\r\nimport { Text } from \"react-native\";\r\nexport default function DropdownExample() {\r\n    const [basicOpen, setBasicOpen] = React.useState(false);\r\n\r\n    return (\r\n        <Dropdown open={basicOpen} onOpenChange={setBasicOpen}>\r\n            <DropdownTrigger asChild>\r\n                <Button variant=\"outline\">\r\n                    <Text className=\"text-foreground\">Open Menu</Text>\r\n                </Button>\r\n            </DropdownTrigger>\r\n            <DropdownContent>\r\n                <DropdownItem icon=\"person-outline\" onSelect={() => console.log(\"Profile\")}>\r\n                    Profile\r\n                </DropdownItem>\r\n                <DropdownItem icon=\"settings-outline\" onSelect={() => console.log(\"Settings\")}>\r\n                    Settings\r\n                </DropdownItem>\r\n                <DropdownItem icon=\"help-circle-outline\" onSelect={() => console.log(\"Help\")}>\r\n                    Help Center\r\n                </DropdownItem>\r\n            </DropdownContent>\r\n        </Dropdown>\r\n    );\r\n}\r\n",
  "customPreview": "import { Button } from \"@/components/ui/button\";\r\nimport {\r\n    Dropdown,\r\n    DropdownContent,\r\n    DropdownGroup,\r\n    DropdownItem,\r\n    DropdownLabel,\r\n    DropdownSeparator,\r\n    DropdownTrigger,\r\n} from \"@/components/ui/dropdown\";\r\nimport * as React from \"react\";\r\nimport { ScrollView, Text, View } from \"react-native\";\r\nimport { SafeAreaView } from \"react-native-safe-area-context\";\r\n\r\nexport default function DropdownExample() {\r\n    const [basicOpen, setBasicOpen] = React.useState(false);\r\n    const [profileOpen, setProfileOpen] = React.useState(false);\r\n    const [settingsOpen, setSettingsOpen] = React.useState(false);\r\n    const [moreOpen, setMoreOpen] = React.useState(false);\r\n\r\n    return (\r\n        <>\r\n            <SafeAreaView className=\"flex-1 bg-background\" edges={[\"bottom\"]}>\r\n                <ScrollView className=\"flex-1 p-4\">\r\n                    <View className=\"mb-6\">\r\n                        <Text className=\"text-2xl font-bold mb-2 text-foreground\">\r\n                            Dropdown\r\n                        </Text>\r\n                        <Text className=\"text-base text-muted-foreground mb-6\">\r\n                            Displays a menu to the user — triggered by a button.\r\n                        </Text>\r\n                    </View>\r\n\r\n                    {/* Basic Dropdown */}\r\n                    <View className=\"mb-8\">\r\n                        <Text className=\"text-xl font-semibold mb-4 text-foreground\">\r\n                            Basic Dropdown\r\n                        </Text>\r\n                        <Dropdown open={basicOpen} onOpenChange={setBasicOpen}>\r\n                            <DropdownTrigger asChild>\r\n                                <Button variant=\"outline\">\r\n                                    <Text className=\"text-foreground\">Open Menu</Text>\r\n                                </Button>\r\n                            </DropdownTrigger>\r\n                            <DropdownContent>\r\n                                <DropdownItem icon=\"person-outline\" onSelect={() => console.log(\"Profile\")}>\r\n                                    Profile\r\n                                </DropdownItem>\r\n                                <DropdownItem icon=\"settings-outline\" onSelect={() => console.log(\"Settings\")}>\r\n                                    Settings\r\n                                </DropdownItem>\r\n                                <DropdownItem icon=\"help-circle-outline\" onSelect={() => console.log(\"Help\")}>\r\n                                    Help Center\r\n                                </DropdownItem>\r\n                            </DropdownContent>\r\n                        </Dropdown>\r\n                    </View>\r\n\r\n                    {/* Profile Dropdown */}\r\n                    <View className=\"mb-8\">\r\n                        <Text className=\"text-xl font-semibold mb-4 text-foreground\">\r\n                            Profile Dropdown\r\n                        </Text>\r\n                        <Dropdown open={profileOpen} onOpenChange={setProfileOpen}>\r\n                            <DropdownTrigger asChild>\r\n                                <Button>\r\n                                    <Text className=\"text-primary-foreground\">Account</Text>\r\n                                </Button>\r\n                            </DropdownTrigger>\r\n                            <DropdownContent>\r\n                                <DropdownLabel>My Account</DropdownLabel>\r\n                                <DropdownGroup>\r\n                                    <DropdownItem\r\n                                        icon=\"person-outline\"\r\n                                        onSelect={() => console.log(\"Profile\")}\r\n                                        shortcut=\"⌘P\"\r\n                                    >\r\n                                        Profile\r\n                                    </DropdownItem>\r\n                                    <DropdownItem\r\n                                        icon=\"card-outline\"\r\n                                        onSelect={() => console.log(\"Billing\")}\r\n                                        shortcut=\"⌘B\"\r\n                                    >\r\n                                        Billing\r\n                                    </DropdownItem>\r\n                                    <DropdownItem\r\n                                        icon=\"settings-outline\"\r\n                                        onSelect={() => console.log(\"Settings\")}\r\n                                        shortcut=\"⌘S\"\r\n                                    >\r\n                                        Settings\r\n                                    </DropdownItem>\r\n                                </DropdownGroup>\r\n                                <DropdownSeparator />\r\n                                <DropdownGroup>\r\n                                    <DropdownItem\r\n                                        icon=\"notifications-outline\"\r\n                                        onSelect={() => console.log(\"Notifications\")}\r\n                                    >\r\n                                        Notifications\r\n                                    </DropdownItem>\r\n                                    <DropdownItem\r\n                                        icon=\"lock-closed-outline\"\r\n                                        onSelect={() => console.log(\"Privacy\")}\r\n                                    >\r\n                                        Privacy\r\n                                    </DropdownItem>\r\n                                </DropdownGroup>\r\n                            </DropdownContent>\r\n                        </Dropdown>\r\n                    </View>\r\n\r\n                    {/* Settings Dropdown */}\r\n                    <View className=\"mb-8\">\r\n                        <Text className=\"text-xl font-semibold mb-4 text-foreground\">\r\n                            Settings Dropdown\r\n                        </Text>\r\n                        <Dropdown open={settingsOpen} onOpenChange={setSettingsOpen}>\r\n                            <DropdownTrigger asChild>\r\n                                <Button variant=\"outline\">\r\n                                    <Text className=\"text-foreground\">Settings</Text>\r\n                                </Button>\r\n                            </DropdownTrigger>\r\n                            <DropdownContent>\r\n                                <DropdownLabel>Appearance</DropdownLabel>\r\n                                <DropdownItem\r\n                                    icon=\"color-palette-outline\"\r\n                                    onSelect={() => console.log(\"Theme\")}\r\n                                >\r\n                                    Theme\r\n                                </DropdownItem>\r\n                                <DropdownItem\r\n                                    icon=\"text-outline\"\r\n                                    onSelect={() => console.log(\"Font Size\")}\r\n                                >\r\n                                    Font Size\r\n                                </DropdownItem>\r\n                                <DropdownSeparator />\r\n                                <DropdownLabel>Privacy</DropdownLabel>\r\n                                <DropdownItem\r\n                                    icon=\"eye-outline\"\r\n                                    onSelect={() => console.log(\"Visibility\")}\r\n                                >\r\n                                    Visibility\r\n                                </DropdownItem>\r\n                                <DropdownItem\r\n                                    icon=\"notifications-outline\"\r\n                                    onSelect={() => console.log(\"Notifications\")}\r\n                                >\r\n                                    Notifications\r\n                                </DropdownItem>\r\n                            </DropdownContent>\r\n                        </Dropdown>\r\n                    </View>\r\n\r\n                    {/* More Actions Dropdown */}\r\n                    <View className=\"mb-8\">\r\n                        <Text className=\"text-xl font-semibold mb-4 text-foreground\">\r\n                            More Actions\r\n                        </Text>\r\n                        <Dropdown open={moreOpen} onOpenChange={setMoreOpen}>\r\n                            <DropdownTrigger asChild>\r\n                                <Button variant=\"outline\">\r\n                                    <Text className=\"text-foreground\">More</Text>\r\n                                </Button>\r\n                            </DropdownTrigger>\r\n                            <DropdownContent>\r\n                                <DropdownItem\r\n                                    icon=\"share-outline\"\r\n                                    onSelect={() => console.log(\"Share\")}\r\n                                >\r\n                                    Share\r\n                                </DropdownItem>\r\n                                <DropdownItem\r\n                                    icon=\"duplicate-outline\"\r\n                                    onSelect={() => console.log(\"Duplicate\")}\r\n                                >\r\n                                    Duplicate\r\n                                </DropdownItem>\r\n                                <DropdownSeparator />\r\n                                <DropdownItem\r\n                                    icon=\"archive-outline\"\r\n                                    onSelect={() => console.log(\"Archive\")}\r\n                                >\r\n                                    Archive\r\n                                </DropdownItem>\r\n                                <DropdownItem\r\n                                    icon=\"trash-outline\"\r\n                                    destructive\r\n                                    onSelect={() => console.log(\"Delete\")}\r\n                                >\r\n                                    Delete\r\n                                </DropdownItem>\r\n                            </DropdownContent>\r\n                        </Dropdown>\r\n                    </View>\r\n\r\n                    <View className=\"h-20\" />\r\n                </ScrollView>\r\n            </SafeAreaView>\r\n        </>\r\n    );\r\n}\r\n"
}