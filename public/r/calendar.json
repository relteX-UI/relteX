{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "calendar",
  "type": "registry:ui",
  "title": "Calendar",
  "description": "A calendar component for React Native applications.",
  "dependencies": [],
  "registryDependencies": [],
  "files": [
    {
      "path": "registry/calendar/calendar.tsx",
      "content": "import { cn } from \"@/lib/utils\";\r\nimport { Ionicons } from \"@expo/vector-icons\";\r\nimport DateTimePicker from \"@react-native-community/datetimepicker\";\r\nimport {\r\n  addMonths,\r\n  eachDayOfInterval,\r\n  endOfDay,\r\n  endOfMonth,\r\n  format,\r\n  getMonth,\r\n  isAfter,\r\n  isBefore,\r\n  isSameDay,\r\n  isSameMonth,\r\n  isToday,\r\n  isWithinInterval,\r\n  setHours,\r\n  setMinutes,\r\n  startOfDay,\r\n  startOfMonth,\r\n  subMonths,\r\n} from \"date-fns\";\r\nimport { enUS } from \"date-fns/locale\";\r\nimport * as React from \"react\";\r\nimport {\r\n  Animated,\r\n  Dimensions,\r\n  Modal,\r\n  Platform,\r\n  Pressable,\r\n  Text,\r\n  View,\r\n} from \"react-native\";\r\n\r\nconst MONTHS = [\r\n  \"January\",\r\n  \"February\",\r\n  \"March\",\r\n  \"April\",\r\n  \"May\",\r\n  \"June\",\r\n  \"July\",\r\n  \"August\",\r\n  \"September\",\r\n  \"October\",\r\n  \"November\",\r\n  \"December\",\r\n];\r\n\r\nconst WEEKDAYS = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\r\n\r\ninterface DateRange {\r\n  from: Date;\r\n  to: Date;\r\n}\r\n\r\ninterface TimeConfig {\r\n  minuteInterval?: 1 | 5 | 10 | 15 | 30;\r\n  minTime?: string; // format \"HH:mm\"\r\n  maxTime?: string; // format \"HH:mm\"\r\n  disabledTimes?: string[]; // format [\"HH:mm\"]\r\n}\r\n\r\ninterface CalendarProps {\r\n  mode?: \"single\" | \"range\" | \"datetime\";\r\n  selected?: Date | Date[] | DateRange;\r\n  onSelect?: (date: Date | Date[] | DateRange | undefined) => void;\r\n  className?: string;\r\n  showOutsideDays?: boolean;\r\n  showTime?: boolean;\r\n  disabled?: (date: Date) => boolean;\r\n  disableWeekends?: boolean;\r\n  fromDate?: Date;\r\n  toDate?: Date;\r\n  timeConfig?: TimeConfig;\r\n  firstDayOfWeek?: 0 | 1; // 0 for Sunday, 1 for Monday\r\n  enableQuickMonthYear?: boolean;\r\n}\r\n\r\nconst SCREEN_WIDTH = Dimensions.get(\"window\").width;\r\nconst DAY_SIZE = Math.min(Math.floor((SCREEN_WIDTH - 48) / 7), 50);\r\n\r\nconst isDateRange = (value: any): value is DateRange => {\r\n  return value && typeof value === \"object\" && \"from\" in value && \"to\" in value;\r\n};\r\n\r\nconst isInRange = (date: Date, range: DateRange) => {\r\n  return isWithinInterval(date, { start: range.from, end: range.to });\r\n};\r\n\r\nconst isRangeStart = (date: Date, range: DateRange) => {\r\n  return isSameDay(date, range.from);\r\n};\r\n\r\nconst isRangeEnd = (date: Date, range: DateRange) => {\r\n  return isSameDay(date, range.to);\r\n};\r\n\r\nconst CalendarHeader = React.memo(({\r\n  currentDate,\r\n  onPrevMonth,\r\n  onNextMonth,\r\n  onHeaderPress,\r\n  enableQuickMonthYear,\r\n}: {\r\n  currentDate: Date;\r\n  onPrevMonth: () => void;\r\n  onNextMonth: () => void;\r\n  onHeaderPress?: () => void;\r\n  enableQuickMonthYear?: boolean;\r\n}) => (\r\n  <View className=\"flex-row items-center justify-between mb-4\">\r\n    <Pressable\r\n      onPress={onPrevMonth}\r\n      className=\"p-2 rounded-full bg-muted active:scale-90 transition-transform\"\r\n    >\r\n      <Ionicons name=\"chevron-back\" size={24} className=\"color-primary\" />\r\n    </Pressable>\r\n\r\n    {enableQuickMonthYear ? (\r\n      <Pressable\r\n        onPress={onHeaderPress}\r\n        className=\"flex-row items-center space-x-1 px-3 py-2 rounded-lg active:bg-muted\"\r\n      >\r\n        <Text className=\"text-xl font-semibold text-foreground\">\r\n          {format(currentDate, \"MMMM yyyy\", { locale: enUS })}\r\n        </Text>\r\n        <Ionicons name=\"chevron-down\" size={20} className=\"color-primary\" />\r\n      </Pressable>\r\n    ) : (\r\n      <Text className=\"text-xl font-semibold text-foreground\">\r\n        {format(currentDate, \"MMMM yyyy\", { locale: enUS })}\r\n      </Text>\r\n    )}\r\n\r\n    <Pressable\r\n      onPress={onNextMonth}\r\n      className=\"p-2 rounded-full bg-muted active:scale-90 transition-transform\"\r\n    >\r\n      <Ionicons name=\"chevron-forward\" size={24} className=\"color-primary\" />\r\n    </Pressable>\r\n  </View>\r\n));\r\n\r\nconst WeekdaysRow = React.memo(({ orderedWeekdays }: { orderedWeekdays: string[] }) => (\r\n  <View className=\"flex-row justify-between mb-2\">\r\n    {orderedWeekdays.map((day) => (\r\n      <View\r\n        key={day}\r\n        style={{ width: DAY_SIZE }}\r\n        className=\"items-center justify-center\"\r\n      >\r\n        <Text className=\"text-sm font-medium text-muted-foreground\">\r\n          {day}\r\n        </Text>\r\n      </View>\r\n    ))}\r\n  </View>\r\n));\r\n\r\nconst CalendarDay = React.memo(({\r\n  date,\r\n  currentDate,\r\n  mode,\r\n  selected,\r\n  isSelected,\r\n  isDisabled,\r\n  onPress,\r\n}: {\r\n  date: Date;\r\n  currentDate: Date;\r\n  mode: \"single\" | \"range\" | \"datetime\";\r\n  selected: Date | Date[] | DateRange | undefined;\r\n  isSelected: boolean;\r\n  isDisabled: boolean;\r\n  onPress: () => void;\r\n}) => {\r\n  const isCurrentMonth = isSameMonth(date, currentDate);\r\n  const isTodayDate = isToday(date);\r\n\r\n  let rangeStyles = \"\";\r\n  if (mode === \"range\" && selected && isDateRange(selected)) {\r\n    const isInCurrentRange = isInRange(date, selected);\r\n    const isStart = isRangeStart(date, selected);\r\n    const isEnd = isRangeEnd(date, selected);\r\n\r\n    if (isInCurrentRange) {\r\n      rangeStyles = \"bg-primary/20\";\r\n    }\r\n    if (isStart) {\r\n      rangeStyles += \" rounded-l-lg\";\r\n    }\r\n    if (isEnd) {\r\n      rangeStyles += \" rounded-r-lg\";\r\n    }\r\n    if (isStart || isEnd) {\r\n      rangeStyles += \" bg-primary\";\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Pressable\r\n      onPress={onPress}\r\n      disabled={isDisabled}\r\n      style={{ width: DAY_SIZE, height: DAY_SIZE }}\r\n      className={cn(\r\n        \"items-center justify-center\",\r\n        mode !== \"range\" && isSelected && \"bg-primary rounded-lg\",\r\n        mode !== \"range\" && isTodayDate && isSelected && \"bg-accent rounded-lg\",\r\n        isDisabled && \"opacity-50\",\r\n        rangeStyles\r\n      )}\r\n    >\r\n      <Text\r\n        className={cn(\r\n          \"text-base\",\r\n          (isSelected &&\r\n            mode === \"range\" &&\r\n            isDateRange(selected) &&\r\n            (isRangeStart(date, selected) || isRangeEnd(date, selected))) ||\r\n            (isSelected && mode !== \"range\")\r\n            ? \"text-primary-foreground\"\r\n            : !isCurrentMonth\r\n              ? \"text-muted-foreground\"\r\n              : \"text-foreground\",\r\n          isDisabled && \"opacity-50\"\r\n        )}\r\n      >\r\n        {format(date, \"d\")}\r\n      </Text>\r\n    </Pressable>\r\n  );\r\n});\r\n\r\nconst TimeSelector = React.memo(({\r\n  selectedDate,\r\n  showTimePicker,\r\n  onToggleTimePicker,\r\n}: {\r\n  selectedDate: Date;\r\n  showTimePicker: boolean;\r\n  onToggleTimePicker: () => void;\r\n}) => (\r\n  <View className=\"px-4 pb-4\">\r\n    <Pressable\r\n      onPress={onToggleTimePicker}\r\n      className=\"flex-row items-center justify-between bg-muted/50 rounded-xl p-4\"\r\n    >\r\n      <View className=\"flex-row items-center\">\r\n        <View className=\"bg-primary/10 p-2 rounded-full mr-4\">\r\n          <Ionicons name=\"time-outline\" size={22} className=\"text-foreground\" />\r\n        </View>\r\n        <Text className=\"text-base font-medium text-foreground\">\r\n          {format(selectedDate, \"HH:mm\")}\r\n        </Text>\r\n      </View>\r\n      <View className=\"flex-row items-center space-x-2\">\r\n        <Text className=\"text-sm text-muted-foreground\">\r\n          {showTimePicker ? \"Tap to close\" : \"Tap to change\"}\r\n        </Text>\r\n        <Ionicons\r\n          name={showTimePicker ? \"chevron-down\" : \"chevron-forward\"}\r\n          size={16}\r\n          className=\"text-muted-foreground\"\r\n        />\r\n      </View>\r\n    </Pressable>\r\n  </View>\r\n));\r\n\r\nconst MonthYearPickerHeader = React.memo(({\r\n  activeTab,\r\n  onClose,\r\n}: {\r\n  activeTab: \"month\" | \"year\";\r\n  setActiveTab: (tab: \"month\" | \"year\") => void;\r\n  onClose: () => void;\r\n}) => (\r\n  <View className=\"border-b border-border\">\r\n    <View className=\"flex-row justify-between items-center px-4 py-3\">\r\n      <Pressable onPress={onClose} className=\"opacity-60 active:opacity-100\">\r\n        <Text className=\"text-grey\">Cancel</Text>\r\n      </Pressable>\r\n      <Text className=\"text-lg font-semibold text-black\">\r\n        {activeTab === \"month\" ? \"Select month\" : \"Select year\"}\r\n      </Text>\r\n      <Pressable onPress={onClose} className=\"opacity-60 active:opacity-100\">\r\n        <Text className=\"text-grey font-semibold\">Done</Text>\r\n      </Pressable>\r\n    </View>\r\n  </View>\r\n));\r\n\r\nconst MonthPicker = React.memo(({\r\n  currentDate,\r\n  onMonthSelect,\r\n  onYearChange,\r\n  onTabChange,\r\n  fromDate,\r\n  toDate,\r\n}: {\r\n  currentDate: Date;\r\n  onMonthSelect: (month: number) => void;\r\n  onYearChange: (year: number) => void;\r\n  onTabChange: () => void;\r\n  fromDate?: Date;\r\n  toDate?: Date;\r\n}) => {\r\n  const currentYear = currentDate.getFullYear();\r\n  const isPrevYearDisabled = fromDate && currentYear <= fromDate.getFullYear();\r\n  const isNextYearDisabled = toDate && currentYear >= toDate.getFullYear();\r\n\r\n  return (\r\n    <View className=\"py-4\">\r\n      <View className=\"px-4 mb-6\">\r\n        <View className=\"flex-row justify-between items-center mb-4\">\r\n          <Pressable\r\n            onPress={() => onYearChange(currentYear - 1)}\r\n            disabled={isPrevYearDisabled}\r\n            className={cn(\r\n              \"p-2 rounded-full active:scale-90 transition-transform\",\r\n              isPrevYearDisabled && \"opacity-50\"\r\n            )}\r\n          >\r\n            <Ionicons name=\"chevron-back\" size={24} className=\"text-black\" />\r\n          </Pressable>\r\n\r\n          <Pressable\r\n            onPress={onTabChange}\r\n            className=\"flex-row items-center px-4 py-2 rounded-lg active:opacity-60\"\r\n          >\r\n            <Text className=\"text-xl font-semibold text-black\">\r\n              {currentYear}\r\n            </Text>\r\n            <View className=\"ml-2\">\r\n              <Ionicons name=\"chevron-forward\" size={20} className=\"text-black\" />\r\n            </View>\r\n          </Pressable>\r\n\r\n          <Pressable\r\n            onPress={() => onYearChange(currentYear + 1)}\r\n            disabled={isNextYearDisabled}\r\n            className={cn(\r\n              \"p-2 rounded-full active:scale-90 transition-transform\",\r\n              isNextYearDisabled && \"opacity-50\"\r\n            )}\r\n          >\r\n            <Ionicons name=\"chevron-forward\" size={24} className=\"text-black\" />\r\n          </Pressable>\r\n        </View>\r\n        <View className=\"flex-row flex-wrap justify-between\">\r\n          {MONTHS.map((month, index) => {\r\n            const isDisabled =\r\n              (fromDate && (\r\n                currentYear === fromDate.getFullYear() &&\r\n                index < fromDate.getMonth()\r\n              )) ||\r\n              (toDate && (\r\n                currentYear === toDate.getFullYear() &&\r\n                index > toDate.getMonth()\r\n              ));\r\n\r\n            return (\r\n              <Pressable\r\n                key={month}\r\n                onPress={() => onMonthSelect(index)}\r\n                disabled={isDisabled}\r\n                className={cn(\r\n                  \"w-[30%] py-3 rounded-lg mb-3 active:scale-95 transition-transform\",\r\n                  getMonth(currentDate) === index ? \"bg-black\" : \"bg-grey\",\r\n                  isDisabled && \"opacity-50\"\r\n                )}\r\n              >\r\n                <Text\r\n                  className={cn(\r\n                    \"text-base text-center\",\r\n                    getMonth(currentDate) === index\r\n                      ? \"text-white font-medium\"\r\n                      : \"text-black\",\r\n                    isDisabled && \"opacity-50\"\r\n                  )}\r\n                >\r\n                  {month}\r\n                </Text>\r\n              </Pressable>\r\n            );\r\n          })}\r\n        </View>\r\n      </View>\r\n    </View>\r\n  );\r\n});\r\n\r\nconst YearPicker = React.memo(({\r\n  currentDate,\r\n  onYearSelect,\r\n  onYearNavigate,\r\n  fromDate,\r\n  toDate,\r\n}: {\r\n  currentDate: Date;\r\n  onYearSelect: (year: number) => void;\r\n  onYearNavigate: (year: number) => void;\r\n  fromDate?: Date;\r\n  toDate?: Date;\r\n}) => {\r\n  const startYear = currentDate.getFullYear() - 10;\r\n  const years = Array.from({ length: 20 }, (_, i) => startYear + i);\r\n\r\n  const minYear = fromDate ? fromDate.getFullYear() : undefined;\r\n  const maxYear = toDate ? toDate.getFullYear() : undefined;\r\n  const isPrevDisabled = minYear !== undefined && startYear - 20 < minYear;\r\n  const isNextDisabled = maxYear !== undefined && startYear + 20 > maxYear;\r\n\r\n  return (\r\n    <View className=\"py-4\">\r\n      <View className=\"px-4\">\r\n        <View className=\"flex-row justify-between items-center mb-4\">\r\n          <Pressable\r\n            onPress={() => onYearNavigate(startYear - 20)}\r\n            disabled={isPrevDisabled}\r\n            className={cn(\r\n              \"p-2 rounded-full active:scale-90 transition-transform\",\r\n              isPrevDisabled && \"opacity-50\"\r\n            )}\r\n          >\r\n            <Ionicons name=\"chevron-back\" size={24} className=\"text-black\" />\r\n          </Pressable>\r\n          <Text className=\"text-xl font-semibold text-black\">\r\n            {`${startYear} - ${startYear + 19}`}\r\n          </Text>\r\n          <Pressable\r\n            onPress={() => onYearNavigate(startYear + 20)}\r\n            disabled={isNextDisabled}\r\n            className={cn(\r\n              \"p-2 rounded-full active:scale-90 transition-transform\",\r\n              isNextDisabled && \"opacity-50\"\r\n            )}\r\n          >\r\n            <Ionicons name=\"chevron-forward\" size={24} className=\"text-black\" />\r\n          </Pressable>\r\n        </View>\r\n\r\n        <View className=\"flex-row flex-wrap justify-between\">\r\n          {years.map((year) => {\r\n            const isDisabled =\r\n              (minYear !== undefined && year < minYear) ||\r\n              (maxYear !== undefined && year > maxYear);\r\n\r\n            return (\r\n              <Pressable\r\n                key={year}\r\n                onPress={() => onYearSelect(year)}\r\n                disabled={isDisabled}\r\n                className={cn(\r\n                  \"w-[23%] py-3 rounded-lg mb-3 active:scale-95 transition-transform\",\r\n                  currentDate.getFullYear() === year ? \"bg-black\" : \"bg-grey\",\r\n                  isDisabled && \"opacity-50\"\r\n                )}\r\n              >\r\n                <Text\r\n                  className={cn(\r\n                    \"text-base text-center\",\r\n                    currentDate.getFullYear() === year\r\n                      ? \"text-white font-medium\"\r\n                      : \"text-black\",\r\n                    isDisabled && \"opacity-50\"\r\n                  )}\r\n                >\r\n                  {year}\r\n                </Text>\r\n              </Pressable>\r\n            );\r\n          })}\r\n        </View>\r\n      </View>\r\n    </View>\r\n  );\r\n});\r\n\r\nexport function Calendar({\r\n  mode = \"single\",\r\n  selected,\r\n  onSelect,\r\n  className,\r\n  showOutsideDays = true,\r\n  disabled,\r\n  fromDate,\r\n  toDate,\r\n  timeConfig,\r\n  firstDayOfWeek = 1,\r\n  enableQuickMonthYear = false,\r\n}: CalendarProps) {\r\n  const [currentDate, setCurrentDate] = React.useState(() => {\r\n    if (selected instanceof Date) {\r\n      return selected;\r\n    }\r\n    return new Date();\r\n  });\r\n  const [showTimePicker, setShowTimePicker] = React.useState(false);\r\n  const [showMonthYearPicker, setShowMonthYearPicker] = React.useState(false);\r\n  const [activeTab, setActiveTab] = React.useState<\"month\" | \"year\">(\"month\");\r\n  const [tempSelectedDate, setTempSelectedDate] = React.useState<Date | null>(null);\r\n\r\n  const fadeAnim = React.useRef(new Animated.Value(0)).current;\r\n\r\n  const orderedWeekdays = React.useMemo(() => {\r\n    const days = [...WEEKDAYS];\r\n    const firstDays = days.splice(0, firstDayOfWeek);\r\n    return [...days, ...firstDays];\r\n  }, [firstDayOfWeek]);\r\n\r\n  const getDaysInMonth = React.useCallback((date: Date) => {\r\n    const start = startOfMonth(date);\r\n    const end = endOfMonth(date);\r\n    const days = eachDayOfInterval({ start, end });\r\n\r\n    // Add days from previous month to fill the first week\r\n    const firstDayOfMonth = (start.getDay() - firstDayOfWeek + 7) % 7;\r\n    if (showOutsideDays && firstDayOfMonth > 0) {\r\n      const prevMonthDays = eachDayOfInterval({\r\n        start: subMonths(start, 1),\r\n        end: subMonths(end, 1),\r\n      }).slice(-firstDayOfMonth);\r\n      days.unshift(...prevMonthDays);\r\n    }\r\n\r\n    // Add days from next month to fill the last week\r\n    if (showOutsideDays && days.length < 42) {\r\n      const remainingDays = 42 - days.length;\r\n      const nextMonthDays = eachDayOfInterval({\r\n        start: addMonths(start, 1),\r\n        end: addMonths(end, 1),\r\n      }).slice(0, remainingDays);\r\n      days.push(...nextMonthDays);\r\n    }\r\n\r\n    return days;\r\n  }, [firstDayOfWeek, showOutsideDays]);\r\n\r\n  const isSelected = React.useCallback((date: Date) => {\r\n    if (!selected) return false;\r\n    if (selected instanceof Date) {\r\n      return isSameDay(selected, date);\r\n    }\r\n    if (Array.isArray(selected)) {\r\n      return selected.some((s) => isSameDay(s, date));\r\n    }\r\n    if (isDateRange(selected)) {\r\n      return (\r\n        isSameDay(selected.from, date) ||\r\n        isSameDay(selected.to, date) ||\r\n        isWithinInterval(date, { start: selected.from, end: selected.to })\r\n      );\r\n    }\r\n    return false;\r\n  }, [selected]);\r\n\r\n  const isDisabled = React.useCallback((date: Date) => {\r\n    if (fromDate && isBefore(date, startOfDay(fromDate))) return true;\r\n    if (toDate && isAfter(date, endOfDay(toDate))) return true;\r\n    if (typeof disabled === \"function\") return disabled(date);\r\n    return false;\r\n  }, [fromDate, toDate, disabled]);\r\n\r\n  const showPicker = React.useCallback(() => {\r\n    setShowMonthYearPicker(true);\r\n    Animated.timing(fadeAnim, {\r\n      toValue: 1,\r\n      duration: 200,\r\n      useNativeDriver: true,\r\n    }).start();\r\n  }, [fadeAnim]);\r\n\r\n  const hidePicker = React.useCallback(() => {\r\n    Animated.timing(fadeAnim, {\r\n      toValue: 0,\r\n      duration: 200,\r\n      useNativeDriver: true,\r\n    }).start(() => {\r\n      setShowMonthYearPicker(false);\r\n    });\r\n  }, [fadeAnim]);\r\n\r\n  const handleMonthSelect = React.useCallback((month: number) => {\r\n    const newDate = new Date(currentDate);\r\n    newDate.setMonth(month);\r\n    setCurrentDate(newDate);\r\n    setShowMonthYearPicker(false);\r\n  }, [currentDate]);\r\n\r\n  const handleYearChange = React.useCallback((year: number) => {\r\n    const newDate = new Date(currentDate);\r\n    newDate.setFullYear(year);\r\n    setCurrentDate(newDate);\r\n  }, [currentDate]);\r\n\r\n  const handleYearSelect = React.useCallback((year: number) => {\r\n    handleYearChange(year);\r\n    setActiveTab(\"month\");\r\n  }, [handleYearChange]);\r\n\r\n  const handleYearNavigate = React.useCallback((year: number) => {\r\n    handleYearChange(year);\r\n    // Ne pas changer d'onglet, rester en mode annÃ©e\r\n  }, [handleYearChange]);\r\n\r\n  const handleDateSelect = React.useCallback((date: Date) => {\r\n    if (isDisabled(date)) return;\r\n\r\n    let newSelected: Date | Date[] | DateRange | undefined;\r\n\r\n    switch (mode) {\r\n      case \"single\":\r\n        newSelected = date;\r\n        break;\r\n      case \"range\":\r\n        if (!selected || !isDateRange(selected)) {\r\n          newSelected = { from: date, to: date };\r\n        } else {\r\n          if (isSameDay(selected.from, selected.to)) {\r\n            if (isBefore(date, selected.from)) {\r\n              newSelected = { from: date, to: selected.from };\r\n            } else {\r\n              newSelected = { from: selected.from, to: date };\r\n            }\r\n          } else {\r\n            newSelected = { from: date, to: date };\r\n          }\r\n        }\r\n        break;\r\n      case \"datetime\":\r\n        setTempSelectedDate(date);\r\n        if (selected instanceof Date) {\r\n          const newDate = setMinutes(\r\n            setHours(date, selected.getHours()),\r\n            selected.getMinutes()\r\n          );\r\n          onSelect?.(newDate);\r\n        } else {\r\n          onSelect?.(date);\r\n        }\r\n        return;\r\n      default:\r\n        newSelected = date;\r\n    }\r\n\r\n    onSelect?.(newSelected);\r\n  }, [mode, selected, onSelect, isDisabled]);\r\n\r\n  const handleTimeChange = React.useCallback((event: any, selectedTime?: Date) => {\r\n    if (Platform.OS === \"android\") {\r\n      setShowTimePicker(false);\r\n      if (event.type === \"dismissed\") return;\r\n    }\r\n\r\n    if (selectedTime && selected instanceof Date) {\r\n      const newDate = setMinutes(\r\n        setHours(selected, selectedTime.getHours()),\r\n        selectedTime.getMinutes()\r\n      );\r\n      onSelect?.(newDate);\r\n    }\r\n  }, [selected, onSelect]);\r\n\r\n  const handlePrevMonth = React.useCallback(() => {\r\n    setCurrentDate(subMonths(currentDate, 1));\r\n  }, [currentDate]);\r\n\r\n  const handleNextMonth = React.useCallback(() => {\r\n    setCurrentDate(addMonths(currentDate, 1));\r\n  }, [currentDate]);\r\n\r\n  const handleToggleTimePicker = React.useCallback(() => {\r\n    setShowTimePicker(!showTimePicker);\r\n  }, [showTimePicker]);\r\n\r\n  return (\r\n    <View className={cn(\"bg-background rounded-2xl\", className)}>\r\n      <View className=\"p-4\">\r\n        <CalendarHeader\r\n          currentDate={currentDate}\r\n          onPrevMonth={handlePrevMonth}\r\n          onNextMonth={handleNextMonth}\r\n          onHeaderPress={showPicker}\r\n          enableQuickMonthYear={enableQuickMonthYear}\r\n        />\r\n\r\n        <Modal\r\n          visible={showMonthYearPicker && enableQuickMonthYear}\r\n          transparent\r\n          animationType=\"none\"\r\n          onRequestClose={hidePicker}\r\n        >\r\n          <Animated.View\r\n            style={{\r\n              flex: 1,\r\n              justifyContent: \"center\",\r\n              alignItems: \"center\",\r\n              backgroundColor: \"rgba(0, 0, 0, 0.25)\",\r\n              padding: 16,\r\n              opacity: fadeAnim,\r\n            }}\r\n          >\r\n            <View\r\n              style={{\r\n                backgroundColor: \"white\",\r\n                borderRadius: 24,\r\n                overflow: \"hidden\",\r\n                width: \"90%\",\r\n                maxWidth: 400,\r\n              }}\r\n            >\r\n              <MonthYearPickerHeader\r\n                activeTab={activeTab}\r\n                setActiveTab={setActiveTab}\r\n                onClose={hidePicker}\r\n              />\r\n\r\n              {activeTab === \"month\" ? (\r\n                <MonthPicker\r\n                  currentDate={currentDate}\r\n                  onMonthSelect={handleMonthSelect}\r\n                  onYearChange={handleYearChange}\r\n                  onTabChange={() => setActiveTab(\"year\")}\r\n                  fromDate={fromDate}\r\n                  toDate={toDate}\r\n                />\r\n              ) : (\r\n                <YearPicker\r\n                  currentDate={currentDate}\r\n                  onYearSelect={handleYearSelect}\r\n                  onYearNavigate={handleYearNavigate}\r\n                  fromDate={fromDate}\r\n                  toDate={toDate}\r\n                />\r\n              )}\r\n            </View>\r\n          </Animated.View>\r\n        </Modal>\r\n\r\n        <WeekdaysRow orderedWeekdays={orderedWeekdays} />\r\n\r\n        <View className=\"flex-row flex-wrap\">\r\n          {getDaysInMonth(currentDate).map((date, index) => (\r\n            <CalendarDay\r\n              key={index}\r\n              date={date}\r\n              currentDate={currentDate}\r\n              mode={mode}\r\n              selected={selected}\r\n              isSelected={isSelected(date)}\r\n              isDisabled={isDisabled(date)}\r\n              onPress={() => handleDateSelect(date)}\r\n            />\r\n          ))}\r\n        </View>\r\n      </View>\r\n\r\n      {mode === \"datetime\" && selected instanceof Date && (\r\n        <TimeSelector\r\n          selectedDate={selected}\r\n          showTimePicker={showTimePicker}\r\n          onToggleTimePicker={handleToggleTimePicker}\r\n        />\r\n      )}\r\n\r\n      {showTimePicker &&\r\n        selected instanceof Date &&\r\n        (Platform.OS === \"ios\" ? (\r\n          <View className=\"px-4 pb-4\">\r\n            <View className=\"bg-muted rounded-xl overflow-hidden\">\r\n              <DateTimePicker\r\n                value={selected}\r\n                mode=\"time\"\r\n                is24Hour={true}\r\n                display=\"spinner\"\r\n                onChange={handleTimeChange}\r\n                textColor={undefined}\r\n                minuteInterval={timeConfig?.minuteInterval}\r\n                locale=\"en\"\r\n              />\r\n            </View>\r\n          </View>\r\n        ) : (\r\n          <DateTimePicker\r\n            value={selected}\r\n            mode=\"time\"\r\n            is24Hour={true}\r\n            display=\"default\"\r\n            onChange={handleTimeChange}\r\n            minuteInterval={timeConfig?.minuteInterval}\r\n            locale=\"en\"\r\n          />\r\n        ))}\r\n    </View>\r\n  );\r\n}\r\n",
      "type": "registry:ui"
    }
  ],
  "changelog": [],
  "customUsage": "import { Calendar } from \"@/components/ui/calendar\";\r\nimport * as React from \"react\";\r\n\r\nexport default function CalendarExample() {\r\n    const [quickPickerDate, setQuickPickerDate] = React.useState<Date>();\r\n\r\n    return (\r\n        <Calendar\r\n            mode=\"single\"\r\n            selected={quickPickerDate}\r\n            onSelect={(date) => setQuickPickerDate(date as Date)}\r\n            className=\"border border-border\"\r\n            enableQuickMonthYear={true}\r\n            fromDate={new Date(2020, 0, 1)}\r\n            toDate={new Date(2050, 11, 31)}\r\n        />\r\n    );\r\n}\r\n",
  "customPreview": "import { Calendar } from \"@/components/ui/calendar\";\r\nimport * as React from \"react\";\r\nimport { ScrollView, Text, View } from \"react-native\";\r\nimport { SafeAreaView } from \"react-native-safe-area-context\";\r\n\r\nexport default function CalendarExample() {\r\n    const [singleDate, setSingleDate] = React.useState<Date>();\r\n    const [dateRange, setDateRange] = React.useState<{\r\n        from: Date;\r\n        to: Date;\r\n    }>();\r\n    const [dateTime, setDateTime] = React.useState<Date>();\r\n    const [dateTime5min, setDateTime5min] = React.useState<Date>();\r\n    const [disabledDate, setDisabledDate] = React.useState<Date>();\r\n    const [quickPickerDate, setQuickPickerDate] = React.useState<Date>();\r\n\r\n    return (\r\n        <>\r\n            <SafeAreaView className=\"flex-1 bg-background\" edges={[\"bottom\"]}>\r\n                <ScrollView className=\"flex-1 p-4\">\r\n                    <View className=\"mb-6\">\r\n                        <Text className=\"text-2xl font-bold mb-2 text-foreground\">\r\n                            Calendar\r\n                        </Text>\r\n                        <Text className=\"text-base text-muted-foreground mb-6\">\r\n                            A date picker component with single date, date range, and\r\n                            date-time selection modes.\r\n                        </Text>\r\n                    </View>\r\n\r\n                    {/* Quick Month/Year Selection - English */}\r\n                    <View className=\"mb-8\">\r\n                        <Text className=\"text-xl font-semibold mb-4 text-foreground\">\r\n                            Quick Month/Year Selection (English)\r\n                        </Text>\r\n                        <Calendar\r\n                            mode=\"single\"\r\n                            selected={quickPickerDate}\r\n                            onSelect={(date) => setQuickPickerDate(date as Date)}\r\n                            className=\"border border-border\"\r\n                            enableQuickMonthYear={true}\r\n                            fromDate={new Date(2020, 0, 1)}\r\n                            toDate={new Date(2050, 11, 31)}\r\n                        />\r\n                        <Text className=\"mt-2 text-sm text-muted-foreground\">\r\n                            Tap on the month/year to open native month/year picker\r\n                        </Text>\r\n                        <Text className=\"mt-1 text-sm text-muted-foreground\">\r\n                            Selected date: {quickPickerDate?.toLocaleDateString(\"fr\")}\r\n                        </Text>\r\n                    </View>\r\n\r\n                    {/* Single Date Selection */}\r\n                    <View className=\"mb-8\">\r\n                        <Text className=\"text-xl font-semibold mb-4 text-foreground\">\r\n                            Single Date (Sunday First)\r\n                        </Text>\r\n                        <Calendar\r\n                            mode=\"single\"\r\n                            selected={singleDate}\r\n                            onSelect={(date) => setSingleDate(date as Date)}\r\n                            className=\"border border-border\"\r\n                            firstDayOfWeek={0}\r\n                        />\r\n                        <Text className=\"mt-2 text-sm text-muted-foreground\">\r\n                            Selected date: {singleDate?.toLocaleDateString()}\r\n                        </Text>\r\n                    </View>\r\n\r\n                    {/* Date Range Selection */}\r\n                    <View className=\"mb-8\">\r\n                        <Text className=\"text-xl font-semibold mb-4 text-foreground\">\r\n                            Date Range\r\n                        </Text>\r\n                        <Calendar\r\n                            mode=\"range\"\r\n                            selected={dateRange}\r\n                            onSelect={(range) =>\r\n                                setDateRange(range as { from: Date; to: Date })\r\n                            }\r\n                            className=\"border border-border\"\r\n                        />\r\n                        <Text className=\"mt-2 text-sm text-muted-foreground\">\r\n                            Selected range:{\" \"}\r\n                            {dateRange\r\n                                ? `${dateRange.from.toLocaleDateString()} - ${dateRange.to.toLocaleDateString()}`\r\n                                : \"No range selected\"}\r\n                        </Text>\r\n                    </View>\r\n\r\n                    {/* Date Time Selection */}\r\n                    <View className=\"mb-8\">\r\n                        <Text className=\"text-xl font-semibold mb-4 text-foreground\">\r\n                            Date & Time (Default)\r\n                        </Text>\r\n                        <Calendar\r\n                            mode=\"datetime\"\r\n                            selected={dateTime}\r\n                            onSelect={(date) => setDateTime(date as Date)}\r\n                            showTime\r\n                            className=\"border border-border\"\r\n                        />\r\n                        <Text className=\"mt-2 text-sm text-muted-foreground\">\r\n                            Selected date & time:{\" \"}\r\n                            {dateTime\r\n                                ? `${dateTime.toLocaleDateString()} ${dateTime.toLocaleTimeString()}`\r\n                                : \"No date/time selected\"}\r\n                        </Text>\r\n                    </View>\r\n\r\n                    {/* Date Time with 5min intervals */}\r\n                    <View className=\"mb-8\">\r\n                        <Text className=\"text-xl font-semibold mb-4 text-foreground\">\r\n                            Date & Time (5min intervals)\r\n                        </Text>\r\n                        <Calendar\r\n                            mode=\"datetime\"\r\n                            selected={dateTime5min}\r\n                            onSelect={(date) => setDateTime5min(date as Date)}\r\n                            showTime\r\n                            timeConfig={{\r\n                                minuteInterval: 5,\r\n                            }}\r\n                            className=\"border border-border\"\r\n                        />\r\n                        <Text className=\"mt-2 text-sm text-muted-foreground\">\r\n                            Selected date & time:{\" \"}\r\n                            {dateTime5min\r\n                                ? `${dateTime5min.toLocaleDateString()} ${dateTime5min.toLocaleTimeString()}`\r\n                                : \"No date/time selected\"}\r\n                        </Text>\r\n                    </View>\r\n\r\n                    {/* Disabled Dates Example */}\r\n                    <View className=\"mb-8\">\r\n                        <Text className=\"text-xl font-semibold mb-4 text-foreground\">\r\n                            With Disabled Dates\r\n                        </Text>\r\n                        <Calendar\r\n                            mode=\"single\"\r\n                            selected={disabledDate}\r\n                            onSelect={(date) => setDisabledDate(date as Date)}\r\n                            fromDate={new Date()}\r\n                            disabled={\r\n                                (date) => date.getDay() === 0 || date.getDay() === 6 // Disable weekends\r\n                            }\r\n                            className=\"border border-border\"\r\n                        />\r\n                        <Text className=\"mt-2 text-sm text-muted-foreground\">\r\n                            Selected date:{\" \"}\r\n                            {disabledDate?.toLocaleDateString() || \"No date selected\"}\r\n                        </Text>\r\n                    </View>\r\n\r\n                    <View className=\"h-20\" />\r\n                </ScrollView>\r\n            </SafeAreaView>\r\n        </>\r\n    );\r\n}\r\n"
}