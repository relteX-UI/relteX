{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "avatar",
  "type": "registry:ui",
  "title": "Avatar",
  "description": "A avatar component for React Native applications.",
  "dependencies": [],
  "registryDependencies": [],
  "files": [
    {
      "path": "registry/avatar/avatar.tsx",
      "content": "import * as React from \"react\";\r\nimport {\r\n  Image,\r\n  View,\r\n  Text,\r\n  ImageSourcePropType,\r\n  ImageStyle,\r\n} from \"react-native\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ninterface AvatarRootProps {\r\n  className?: string;\r\n  children: React.ReactNode;\r\n}\r\n\r\nconst AvatarRoot = React.forwardRef<View, AvatarRootProps>(\r\n  ({ className, children, ...props }, ref) => {\r\n    return (\r\n      <View\r\n        ref={ref}\r\n        className={cn(\r\n          \"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full\",\r\n          className\r\n        )}\r\n        {...props}\r\n      >\r\n        {children}\r\n      </View>\r\n    );\r\n  }\r\n);\r\n\r\ninterface AvatarImageProps {\r\n  className?: string;\r\n  source: ImageSourcePropType;\r\n  alt?: string;\r\n  style?: ImageStyle;\r\n  onLoad?: () => void;\r\n  onError?: () => void;\r\n}\r\n\r\nconst AvatarImage = React.forwardRef<Image, AvatarImageProps>(\r\n  ({ className, source, alt, ...props }, ref) => {\r\n    const imageContext = React.useContext(AvatarContext);\r\n\r\n    const handleError = () => {\r\n      imageContext?.setHasError(true);\r\n      props.onError?.();\r\n    };\r\n\r\n    const handleLoad = () => {\r\n      imageContext?.setImageLoaded(true);\r\n      props.onLoad?.();\r\n    };\r\n\r\n    return (\r\n      <Image\r\n        ref={ref}\r\n        source={source}\r\n        accessibilityLabel={alt}\r\n        className={cn(\"h-full w-full object-cover\", className)}\r\n        onError={handleError}\r\n        onLoad={handleLoad}\r\n        {...props}\r\n      />\r\n    );\r\n  }\r\n);\r\n\r\ninterface AvatarFallbackProps {\r\n  className?: string;\r\n  children: React.ReactNode;\r\n  delayMs?: number;\r\n}\r\n\r\ninterface AvatarContextValue {\r\n  hasError: boolean;\r\n  setHasError: React.Dispatch<React.SetStateAction<boolean>>;\r\n  imageLoaded: boolean;\r\n  setImageLoaded: React.Dispatch<React.SetStateAction<boolean>>;\r\n}\r\n\r\nconst AvatarContext = React.createContext<AvatarContextValue | null>(null);\r\n\r\nconst AvatarFallback = React.forwardRef<View, AvatarFallbackProps>(\r\n  ({ className, children, delayMs = 600, ...props }, ref) => {\r\n    const [isShowing, setIsShowing] = React.useState(delayMs === 0);\r\n    const avatarContext = React.useContext(AvatarContext);\r\n\r\n    React.useEffect(() => {\r\n      if (delayMs === 0) return;\r\n\r\n      // Only show fallback if image has error or hasn't loaded after delay\r\n      const timer = setTimeout(() => {\r\n        if (!avatarContext?.imageLoaded) {\r\n          setIsShowing(true);\r\n        }\r\n      }, delayMs);\r\n\r\n      return () => clearTimeout(timer);\r\n    }, [delayMs, avatarContext?.imageLoaded]);\r\n\r\n    // Hide fallback if image loads successfully\r\n    React.useEffect(() => {\r\n      if (avatarContext?.imageLoaded) {\r\n        setIsShowing(false);\r\n      }\r\n    }, [avatarContext?.imageLoaded]);\r\n\r\n    if (!isShowing || avatarContext?.imageLoaded) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <View\r\n        ref={ref}\r\n        className={cn(\r\n          \"absolute inset-0 flex h-full w-full items-center justify-center bg-muted\",\r\n          className\r\n        )}\r\n        {...props}\r\n      >\r\n        {typeof children === \"string\" ? (\r\n          <Text className=\"text-base font-medium text-muted-foreground\">\r\n            {children}\r\n          </Text>\r\n        ) : (\r\n          children\r\n        )}\r\n      </View>\r\n    );\r\n  }\r\n);\r\n\r\n// Wrap the original AvatarRoot to provide context\r\nconst Avatar = React.forwardRef<View, AvatarRootProps>((props, ref) => {\r\n  const [hasError, setHasError] = React.useState(false);\r\n  const [imageLoaded, setImageLoaded] = React.useState(false);\r\n\r\n  return (\r\n    <AvatarContext.Provider\r\n      value={{\r\n        hasError,\r\n        setHasError,\r\n        imageLoaded,\r\n        setImageLoaded,\r\n      }}\r\n    >\r\n      <AvatarRoot ref={ref} {...props} />\r\n    </AvatarContext.Provider>\r\n  );\r\n});\r\n\r\nAvatarRoot.displayName = \"AvatarRoot\";\r\nAvatar.displayName = \"Avatar\";\r\nAvatarImage.displayName = \"AvatarImage\";\r\nAvatarFallback.displayName = \"AvatarFallback\";\r\n\r\nexport { Avatar, AvatarImage, AvatarFallback };\r\n",
      "type": "registry:ui"
    }
  ],
  "changelog": [],
  "customUsage": "import { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\r\nimport React from \"react\";\r\n\r\nexport default function AvatarExample() {\r\n    return (\r\n        <Avatar>\r\n            <AvatarImage\r\n                source={{ uri: \"https://avatars.githubusercontent.com/u/204157942?s=200&v=4\" }}\r\n                alt=\"Profile picture\"\r\n            />\r\n            <AvatarFallback>TR</AvatarFallback>\r\n        </Avatar>\r\n    );\r\n} ",
  "customPreview": "import { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\r\nimport React from \"react\";\r\nimport { ScrollView, Text, View } from \"react-native\";\r\nimport { SafeAreaView } from \"react-native-safe-area-context\";\r\n\r\nexport default function AvatarExample() {\r\n    return (\r\n        <>\r\n            <SafeAreaView className=\"flex-1 bg-background\" edges={[\"bottom\"]}>\r\n                <ScrollView className=\"px-5 py-5\">\r\n                    <View className=\"mb-6\">\r\n                        <Text className=\"text-2xl font-bold mb-2 text-foreground\">\r\n                            Avatar\r\n                        </Text>\r\n                        <Text className=\"text-base mb-4 text-muted-foreground\">\r\n                            An image component with a fallback for user avatars and profile pictures\r\n                        </Text>\r\n                    </View>\r\n\r\n                    <View className=\"mb-8\">\r\n                        <Text className=\"text-xl font-semibold mb-4 text-foreground\">\r\n                            Default Avatar\r\n                        </Text>\r\n                        <View className=\"flex-row gap-4\">\r\n                            <Avatar>\r\n                                <AvatarImage\r\n                                    source={{ uri: \"https://avatars.githubusercontent.com/u/204157942?s=200&v=4\" }}\r\n                                    alt=\"Profile picture\"\r\n                                />\r\n                                <AvatarFallback>TR</AvatarFallback>\r\n                            </Avatar>\r\n                        </View>\r\n                    </View>\r\n\r\n                    <View className=\"mb-8\">\r\n                        <Text className=\"text-xl font-semibold mb-4 text-foreground\">\r\n                            Avatar Sizes\r\n                        </Text>\r\n                        <View className=\"flex-row items-center gap-4\">\r\n                            <Avatar className=\"h-8 w-8\">\r\n                                <AvatarImage\r\n                                    source={{ uri: \"https://avatars.githubusercontent.com/u/204157942?s=200&v=4\" }}\r\n                                    alt=\"Small avatar\"\r\n                                />\r\n                                <AvatarFallback>TR</AvatarFallback>\r\n                            </Avatar>\r\n\r\n                            <Avatar>\r\n                                <AvatarImage\r\n                                    source={{ uri: \"https://avatars.githubusercontent.com/u/204157942?s=200&v=4\" }}\r\n                                    alt=\"Default avatar\"\r\n                                />\r\n                                <AvatarFallback>TR</AvatarFallback>\r\n                            </Avatar>\r\n\r\n                            <Avatar className=\"h-16 w-16\">\r\n                                <AvatarImage\r\n                                    source={{ uri: \"https://avatars.githubusercontent.com/u/204157942?s=200&v=4\" }}\r\n                                    alt=\"Large avatar\"\r\n                                />\r\n                                <AvatarFallback>TR</AvatarFallback>\r\n                            </Avatar>\r\n                        </View>\r\n                    </View>\r\n\r\n                    <View className=\"mb-8\">\r\n                        <Text className=\"text-xl font-semibold mb-4 text-foreground\">\r\n                            With Fallback\r\n                        </Text>\r\n                        <View className=\"flex-row gap-4\">\r\n                            <Avatar>\r\n                                <AvatarImage\r\n                                    source={{ uri: \"https://invalid-image-url.png\" }}\r\n                                    alt=\"Invalid image\"\r\n                                />\r\n                                <AvatarFallback>JD</AvatarFallback>\r\n                            </Avatar>\r\n\r\n                            <Avatar>\r\n                                <AvatarImage\r\n                                    source={{ uri: \"https://another-invalid-url.png\" }}\r\n                                    alt=\"Invalid image\"\r\n                                />\r\n                                <AvatarFallback>AB</AvatarFallback>\r\n                            </Avatar>\r\n\r\n                            <Avatar>\r\n                                <AvatarFallback>MK</AvatarFallback>\r\n                            </Avatar>\r\n                        </View>\r\n                    </View>\r\n\r\n                    <View className=\"mb-8\">\r\n                        <Text className=\"text-xl font-semibold mb-4 text-foreground\">\r\n                            Custom Styling\r\n                        </Text>\r\n                        <View className=\"flex-row gap-4\">\r\n                            <Avatar className=\"bg-primary\">\r\n                                <AvatarFallback className=\"bg-primary text-primary-foreground\">\r\n                                    PR\r\n                                </AvatarFallback>\r\n                            </Avatar>\r\n\r\n                            <Avatar className=\"bg-secondary\">\r\n                                <AvatarFallback className=\"bg-secondary text-secondary-foreground\">\r\n                                    SC\r\n                                </AvatarFallback>\r\n                            </Avatar>\r\n\r\n                            <Avatar className=\"border-2 border-destructive\">\r\n                                <AvatarImage\r\n                                    source={{ uri: \"https://avatars.githubusercontent.com/u/204157942?s=200&v=4\" }}\r\n                                    alt=\"Bordered avatar\"\r\n                                    className=\"border-sm border-background\"\r\n                                />\r\n                                <AvatarFallback>BD</AvatarFallback>\r\n                            </Avatar>\r\n                        </View>\r\n                    </View>\r\n                </ScrollView>\r\n            </SafeAreaView>\r\n        </>\r\n    );\r\n} "
}